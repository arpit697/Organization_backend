"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.accountRoutes = void 0;
const express_1 = require("express");
const account_controller_1 = require("./account.controller");
const account_validators_1 = require("./account.validators");
const client_details_1 = require("../../../middlewares/client-details");
const session_1 = require("../../../middlewares/session");
const user_type_constants_1 = require("../../../constants/user.type.constants");
const accountRouter = (0, express_1.Router)();
accountRouter.post('/login', account_validators_1.userValidators.login, client_details_1.extractClientDetails, account_controller_1.accountController.login);
accountRouter.post('/signup', account_validators_1.userValidators.signup, client_details_1.extractClientDetails, account_controller_1.accountController.signup);
const secureRouter = (0, express_1.Router)();
secureRouter.route('/profile').get(account_controller_1.accountController.profile).patch(account_validators_1.userValidators.profile, account_controller_1.accountController.update);
accountRouter.use((0, session_1.session)([user_type_constants_1.UserType.USER]), secureRouter);
exports.accountRoutes = { path: '/account', accountRouter };
